## 1. 项目简介

Sublend 是基于 Substrate ink! 实现的借贷合约，可以部署到所有支持 WASM 合约的平行链。通过提供一种信用委托式的贷款，区别于超额抵押借贷模式，类似于白条和亲密付的结合体，提高储备资金的利用率；同时提供固定利率贷款，满足一些传统金融机构对可预测财务支出的需求。可有效解决 DeFi 借贷协议中储备金流动性的问题和财务支出不可预测的问题。

应用场景有：传统金融机构的固定利率贷款；DAO中公益支持者以无需偿还的方式资助项目等。

### 1.1 项目背景

根据 DeFi Pulse 的数据，目前 DeFi 中锁定的资产总价值已经超过了 437 亿美元。为了保证去中心化系统运转，DeFi 借贷协议通常需要超额抵押。这和传统金融一样，存在有资本效率低的缺点。

### 1.2 项目要解决的问题

* 提高 DeFi 借贷协议中储备金流动性；
* 解决财务支出不可预测的问题；
* 提供 NFT 抵押借贷，释放 NFT 资产的流动性；
* 为波卡生态提供一套借贷智能合约，可供平行链使用；

## 2. 项目设计

本项目采用了资金池模型设计，提供抵押借贷和无抵押借贷两种方式。

抵押借贷，用户需要首先将其拥有的加密资产作为抵押品存入对应的资金池中，然后从资金池中借出其需要的其它加密资产。加密资产也支持 NFT 作为抵押品，增加 NFT 市场的资金流动性。

无抵押借贷，用户无需抵押资产，只需获得其他用户授权的信用额度，即可从对应的资金池中借款，也可以称为信用委托借贷。

使用 Patract 提供的 Redspot WASM 合约开发套件实现借贷合约。

### 2.1 项目架构图

![architecture](https://raw.githubusercontent.com/lesterli/Sublend/main/Architecture.png?token=ABFRESVBA3SVCLF4JKXBBA3AJ33UC)

### 2.2 项目模块

* 使用 React JS 开发的用户操作页面，支持存款，提现，信用委托借款，还款等操作；

* 使用 Redspot 开发的 WASM 智能合约，实现用户借贷操作，以及利率的调整；

* 部署 Patract 测试网络等智能合约平行链的部署脚本；

### 2.3 遇到的技术难点和解决方案

* 在 Ink 合约开发中遇到一些数值计算的问题，采用 Patract 提供的WASM合约开发工具尽可能提高开发效率，以及部署到其提供的智能合约测试网络，方便进行测试。
* 合约和 Runtime 进行交互获取链下价格的问题，集成波卡生态中智能合约平行链的预言机。

## 3. 项目现在做到的程度

* 实现了 ERC20 智能合约，可以用来实例化**sToken**和**debtToken**，分别表示用户存款/信用额度和借款额度；
* 实现了 **LendingPool** 智能合约，用户可以充值抵押品，并授权其存款/信用额度给他人，以及提现其抵押品；
* 同时 **LendingPool** 支持用户通过信用委托的方式贷款，以及归还其借款；
* 目前支持资金池有：DOT 