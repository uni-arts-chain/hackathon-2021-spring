# PolkaName

## 概述 

PNS(Polkadot Name Service)是Polkadot区块链上的一个基于智能合约的域名系统，它允许用户创建去中心化域名。支持的钱包就可以允许发送者输入PNS域名，而不是长而笨重的地址。这可以防止网络钓鱼、欺诈、错别字，并在常规钱包用户体验的基础上增加一层可用性。 在Polkadot的区块链上，PNS系统具有多链支持，用户能够通过向PNS添加KSM和DOT地址，深度集成到Polkadot的生态系统，为Web3应用提供有力支撑。每个域名也可以同时作为NFT进行交易和流通。 PNS可以实现波卡生态的身份可读性，与litentry的身份聚合进行合作，实现超强用户体验的身份系统.PNS域名本质上遵循NFT协议，可以进行拍卖与交易，通过波卡的治理模块可以实现一个去中心化的域名服务商。 

PNS的目标与互联网的域名服务DNS类似，与DNS一样，PNS也是在一个称为域名的点分离分级名称系统上运行，域名的所有者对子域名有完全的控制权。 顶级域名，如'.polka'和'.dot'，由智能合约所拥有，这些合约规定了管理其子域名分配的规则。任何人只要遵守这些注册商合同规定的规则，就可以获得一个域名的所有权供自己使用。 由于PNS的分级性质，任何拥有任何级别域名的人都可以根据需要为自己或他人配置子域。例如，如果Alice拥有 "alice.polka"，她可以创建 "acala.alice.polka"，作为自己在acala网络上的地址，子域名的一切可以根据自己的意愿进行配置。 PNS未来部署在Kusama与Polkadot的平行链上。如果你使用一个库，如Polkadot.js库，或一个终端用户应用程序，它将自动检测你正在与之交互的网络，并在该网络上使用PNS部署。 

## PNS架构设计 

PNS有两个主要组成部分：**注册表**，和**解析器**。 

### PNS注册表 

PNS注册表由一个单一的智能合约组成，它维护着所有域名和子域名的列表，并存储着关于每个域名的三个关键信息： 域名的所有者;域名的解析器;域名下所有记录的存活时间。 域名的所有者可以是一个外部账户（用户），也可以是一个智能合约。注册商只是一个智能合约，它拥有一个域名，并将该域名的子域发给遵循合约中定义的某些规则的用户。 PNS注册处的域名所有者可以： 设置域名的解析器和TTL;将域名的所有权转移到另一个地址;更改子域的所有权 

### PNS解析器 

PNS解析器负责将名称转化为地址的实际过程。任何实施相关标准的合同都可以作为PNS中的解析器。对于要求简单的用户，如为一个名称提供不经常改变的地址，提供通用的解析器实施。 PNS对每种记录类型（加密货币地址、IPFS内容哈希等）都定义了一种或多种方法，PNS解析器必须实施这些方法才能提供该类记录。新的记录类型可以在任何时候通过EIP标准化过程来定义，不需要为了支持这些记录而对PNS注册表或现有的解析器进行更改。 在PNS中解析一个域名分为两个过程。首先，需要询问注册表哪个解析器负责解析该域名。其次，询问该解析器对查询的返回。

## 应用场景 

DAPP中的PNS集成包含了几个关键功能，每个功能都可以独立实现。虽然全面的PNS集成是理想的，但即使是基本的支持也会给用户带来巨大的好处。下面，我们概述了PNS集成的四个层次。PNS解析很容易实现，并为用户提供高影响，而反向解析、第3级与第4级则为您的用户提供更多的功能，提高DApp的可用性和用户与DApp的交互体验。 

### PNS解析 

在您的应用程序中支持PNS的第一步是使您的应用程序理解PNS名称，并接受它们。当用户输入PNS名称而不是地址时，记住PNS名称，而不是当前解析的地址。这使得用户可以更新他们的PNS名称，并让他们使用该名称的DApp自动解析到新的地址，就像当你使用的网站更换服务器时，你希望你的浏览器会自动引导你到新的IP地址一样。 如果Dapp处理关键资源时（例如处理资金），需要跟踪名称解析到的地址，并在其变化时向用户发出提醒，以保障安全性。 

### 反向解析 

PNS集成的第二个层次涉及在Dapp当前显示地址的地方显示PNS名称。如果用户在DApp中输入了一个PNS，应该保留这个名称，并在通常显示地址的地方向他们显示。 如果用户输入了一个地址，或者该地址是从其他地方获得的，你仍然可以通过反向解析来显示PNS名称。 通过支持反向解析，可以让用户更容易识别他们与之交互的账户，将其与一个简短的人类可读的名称相关联，而不是一个长的不透明的地址。 

### 事物命名 

全面的PNS集成的最后一步是方便将PNS名称与Dapp创建或管理的资源关联起来。这可以采取两种形式。 **名称注册** 通过Dapp获得一个PNS名称，并允许用户轻松注册子域，可以为用户提供一种简单的方式来命名DApp中创建的资源。例如，如果DApp是一个加密货币钱包，可以让用户轻松获得一个 theirname.yourwallet.polka 形式的 PNS 域名，让他们可以更容易地把自己的名字给别人。 **名称更新** 通过为用户提供一种简单的方法来更新他们拥有的名称以指向Dapp的资源，用户可以将他们已经拥有的名称分配给您的DApp的资源。 

### PNS vs. 短地址

由于波卡地址不方便记忆，于是波卡推出了短地址的功能，然而PNS的应用场景与波卡短地址并不一样，其主要的区别在于： 波卡的短地址只用于钱包，而PNS可以指向合约；波卡的短地址只能唯一绑定一个钱包，而PNS可以通过创建子域名，实现层级管理。例如：Alice想实现一个公司治理的DAPP，公司名叫做Alice_company, Alice招募了一些员工，每个人有一个收款钱包，在PNS上，Alice可以创建一个员工账户集，例如bob.Alice_company.polka,david.Alice_company.polka，以此类推。Alice在发工资的时候可以直接向这些可读的地址发送报酬，而不需要去查询一个地址表；PNS的域名交易更加自由，域名可以作为一种NFT资产，在各大NFT平台上自由交易与拍卖。

### 域名管理 

转让域名：PNS中的每个主域名都有一个所有者。这个账户或合约是唯可以对PNS登记处的名称进行更改的账户。域名的所有者可以将所有权转让给任何其他账户。

 创建子域名：任何域名的所有者都可以根据需要配置子域名。这可以通过创建一个子域并将其所有者设置为所需的地址来实现--这可以是与父域的所有者相同的地址，也可以是任何其他地址。

设置解析器：在使用新创建的域名或子域名之前，必须设置一个解析器地址。如果有更新的解析器实现，并且支持使用的功能，可能需要这样做。 最常见的是，域名被设置为使用称为公共解析器的 "标准 "解析器，该解析器提供了常用的功能，但任何人都可以编写和部署自己的专用解析器。

更新记录：要更改地址解析到的资源，就必须更新该名称在其解析器中的记录。每个解析器都可以指定自己的更新记录机制，但公共解析器和其他许多解析器都实现了一种标准方法。一些库提供了使用该接口更新解析器记录的功能。 

配置反向解析：常规 "解析涉及从名称到地址的映射，而反向解析则是从地址映射回名称或其他元数据。PNS支持反向解析，允许应用程序显示ENS名称以代替十六进制地址。在做到这一点之前，地址的所有者必须为他们的地址配置反向解析。这是通过调用反向解析器上的claim()方法完成的，该方法的特殊名称为'addr.reverse'。最常见的是通过用户接口来完成，比如PNS Manager DApp。

注册和更新域名：当用户第一次想获得一个域名时，必须与注册商进行互动。注册商是拥有域名的智能合约，有明确的发放子域名的流程。用户需要与哪个注册商互动取决于他们想要获得的域名；例如，用户想要一个.dot的域名，就必须与.dot注册商互动。每个注册商都为域名注册（以及适当的续费）定义了自己的API。目前，没有用于与注册商交互的库；希望这样做的DApp必须使用通用的Polkadot库（如polkadot.js）与注册商合约交互。 

## PNS作为NFT 

当PNS .polka与.dot注册器会在以太坊上进行映射，并成为符合ERC721标准的非同质化代币合约，这意味着.polka与.dot注册器可以像其他NFT一样进行转让。 

## API文档 

TO DO 

## 智能合约

TO DO

